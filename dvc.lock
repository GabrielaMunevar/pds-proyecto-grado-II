schema: '2.0'
stages:
  preprocess:
    cmd: python src/data/make_dataset.py
    deps:
    - path: data/raw
      hash: md5
      md5: a98033fb29eadaabe039bf1ee4f77121.dir
      size: 519712871
      nfiles: 65945
    - path: src/data/make_dataset.py
      hash: md5
      md5: d3db2b26e9402686f47c1508cedc56b7
      size: 31515
    params:
      params.yaml:
        data:
          min_chars: 100
          max_chars: 20000
          keep_lang:
          - en
          dedup: true
          dedup_method: hash
          lowercase: false
          remove_html: true
          normalize_spaces: true
          min_words: 15
          min_paragraph_words: 20
          min_english_confidence: 0.9
          split_by_paragraphs: true
          min_paragraph_length: 100
    outs:
    - path: data/processed/dataset_clean.csv
      hash: md5
      md5: e448e860ae58d1b47550ce5cb24b4fc8
      size: 232485391
    - path: data/processed/dataset_clean.jsonl
      hash: md5
      md5: a546663d7386456b9d08cf9387074cb3
      size: 253509633
    - path: data/processed/dataset_clean_stats.json
      hash: md5
      md5: b0051daa5720359c1db8b34eeab26d56
      size: 359
  split:
    cmd: python src/data/split_dataset.py
    deps:
    - path: data/processed/dataset_clean.csv
      hash: md5
      md5: e448e860ae58d1b47550ce5cb24b4fc8
      size: 232485391
    - path: src/data/split_dataset.py
      hash: md5
      md5: 3fcfe5ff625dfaa9986bbbc067d4bc03
      size: 2903
    params:
      params.yaml:
        split:
          method: internal
          test_size: 0.2
          stratify:
          - label
          random_seed: 42
          respect_existing_splits: true
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 3d0c9333d1a444d9dd09a637e67829f7
      size: 39947028
    - path: data/processed/train.csv
      hash: md5
      md5: 58e94e9507575ee19c8deeefdcbe6a20
      size: 182152135
