schema: '2.0'
stages:
  preprocess:
    cmd: python src/data/make_dataset.py
    deps:
    - path: data/raw
      hash: md5
      md5: b90268b897d70ed8c67cd0bbe978f2b9.dir
      size: 200961115
      nfiles: 60331
    - path: src/data/make_dataset.py
      hash: md5
      md5: ad2cd21f78fe14b81e24b63ada9b2d97
      size: 31634
    params:
      params.yaml:
        data:
          min_chars: 100
          max_chars: 20000
          keep_lang:
          - en
          dedup: true
          dedup_method: hash
          lowercase: false
          remove_html: true
          normalize_spaces: true
          min_words: 15
          min_paragraph_words: 20
          min_english_confidence: 0.9
          split_by_paragraphs: true
          min_paragraph_length: 100
    outs:
    - path: data/processed/dataset_clean.csv
      hash: md5
      md5: a7c330a6a5d730fb2ba59aebcc549c08
      size: 215483036
    - path: data/processed/dataset_clean.jsonl
      hash: md5
      md5: e352e2312d92370de24cf01fd51b8def
      size: 233340620
    - path: data/processed/dataset_clean_stats.json
      hash: md5
      md5: 7bc14413834f462b397a78a88cc0057b
      size: 326
  split:
    cmd: python src/data/split_dataset.py
    deps:
    - path: data/processed/dataset_clean.csv
      hash: md5
      md5: a7c330a6a5d730fb2ba59aebcc549c08
      size: 215483036
    - path: src/data/split_dataset.py
      hash: md5
      md5: f4c77eec7db14faa89757f529e7f321d
      size: 4711
    params:
      params.yaml:
        split:
          method: internal
          test_size: 0.2
          stratify:
          - label
          random_seed: 42
          respect_existing_splits: true
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: 258d22566eb2ef6d330d7454279e6851
      size: 40055433
    - path: data/processed/train.csv
      hash: md5
      md5: 40a506d703e97b665a9511c02cbbd91e
      size: 166395045
